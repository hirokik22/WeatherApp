<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open-Metro Weather Forcast</title>
</head>
<body>
    <h1>Wealther In Copenhagen</h1>
    <h2>Hourly tempurature and percipitation probability (Past week)</h2>
    <div id="weather-data">
    </div>

    <script>
        var apiUrl = 'https://api.open-meteo.com/v1/forecast?latitude=55.6759&longitude=12.5655&hourly=temperature_2m,precipitation_probability&timezone=Europe%2FBerlin';

        function fetchWeatherData() {
            fetch(apiUrl)
                .then(function(response) {
                    return response.json();
                })
                .then(function(data) {
                    var times = data.hourly.time;
                    var temperatures = data.hourly.temperature_2m;
                    var precipitationProbabilities = data.hourly.precipitation_probability;

                    var weatherDataDiv = document.getElementById('weather-data');
                    weatherDataDiv.innerHTML = '';

                    for (var i = 0; i < times.length; i++) {
                        var timeInfo = document.createElement('p');
                        var temperatureInfo = document.createElement('p');
                        var precipitationInfo = document.createElement('p');

                        var timeText = document.createTextNode('Time: ' + new Date(times[i]).toLocaleString('en-GB', { timeZone: 'Europe/Berlin' }));
                        var temperatureText = document.createTextNode('Temperature: ' + temperatures[i] + ' Â°C');
                        var precipitationText = document.createTextNode('Precipitation Probability: ' + precipitationProbabilities[i] + '%');

                        timeInfo.appendChild(timeText);
                        temperatureInfo.appendChild(temperatureText);
                        precipitationInfo.appendChild(precipitationText);

                        weatherDataDiv.appendChild(timeInfo);
                        weatherDataDiv.appendChild(temperatureInfo);
                        weatherDataDiv.appendChild(precipitationInfo);

                        var br = document.createElement('br');
                        weatherDataDiv.appendChild(br);
                    }
                })
                .catch(function(error) {
                    console.error('Error fetching weather data:', error);
                });
        }

        fetchWeatherData();
    </script>
</body>
</html>
